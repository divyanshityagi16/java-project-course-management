<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Course Management System</title>


<style>
    body {
        margin: 0;
        font-family: 'Segoe UI', sans-serif;
        background-color: #f9fafb;
        display: flex;
        justify-content: center;
        align-items: center;
        padding: 40px;
    }

    .container {
        background: #ffffff;
        width: 80%;
        padding: 35px;
        border-radius: 18px;
        box-shadow: 0 8px 20px rgba(0,0,0,0.08);
        border: 1px solid #e8e8e8;
    }

    h2 {
        color: #374151;
        font-size: 28px;
        text-align: center;
        margin-bottom: 25px;
        font-weight: 600;
    }

    input {
        width: 29%;
        padding: 11px;
        margin: 10px 5px;
        border-radius: 10px;
        border: 1px solid #d4d4d8;
        background: #f8fafc;
        font-size: 15px;
        transition: 0.2s ease-in-out;
    }

    input:focus {
        outline: none;
        border-color: #60a5fa;
        background: #ffffff;
    }

    button {
        padding: 11px 20px;
        margin: 10px 5px;
        border: none;
        border-radius: 10px;
        cursor: pointer;
        color: #fff;
        font-weight: 600;
        font-size: 14px;
        transition: 0.2s;
    }

    .add-btn { background:#38bdf8; }       
    .update-btn { background:#fbbf24; }    
    .delete-btn { background:#ef4444; }    
    .edit-btn { background:#a78bfa; }      

    button:hover {
        opacity: 0.85;
        transform: translateY(-2px);
    }

    table {
        width: 100%;
        border-collapse: collapse;
        margin-top: 30px;
        border-radius: 12px;
        overflow: hidden;
    }

    th {
        background:#e0e7ff;      
        color:#4338ca;
        padding: 12px;
        font-weight: 600;
    }

    td {
        background: #ffffff;
        padding: 12px;
        border-bottom: 1px solid #f1f5f9;
    }

    tr:hover td {
        background: #f8fafc;
    }
</style>
</head>

<body>

<div class="container">
    <h2>ðŸ“š Course Management System</h2>

    <input id="id" placeholder="ID" disabled>
    <input id="code" placeholder="Course Code (e.g. CS101)">
    <input id="name" placeholder="Course Name (e.g. Java)">
    
    <button class="add-btn" onclick="addCourse()">Add</button>
    <button class="update-btn" onclick="updateCourse()">Update</button>

    <table id="courseTable">
        <thead>
            <tr>
                <th>ID</th>
                <th>Course Code</th>
                <th>Course Name</th>
                <th>Action</th>
            </tr>
        </thead>
        <tbody></tbody>
    </table>
</div>

<!--  JAVASCRIPT  -->
<script>
let selectedId = null;

function loadCourses(){
    fetch("http://localhost:3000/courses")
    .then(res => res.json())
    .then(data => {
        let rows = "";
        data.forEach(course => {
            rows += `
                <tr>
                    <td>${course.id}</td>
                    <td>${course.code}</td>
                    <td>${course.name}</td>
                    <td>
                        <button class="edit-btn" onclick="editCourse(${course.id}, '${course.code}', '${course.name}')">Edit</button>
                        <button class="delete-btn" onclick="deleteCourse(${course.id})">Delete</button>
                    </td>
                </tr>`;
        });
        document.querySelector("#courseTable tbody").innerHTML = rows;
    });
}
loadCourses();

function addCourse(){
    fetch("http://localhost:3000/courses", {
        method: "POST",
        headers: {"Content-Type":"application/json"},
        body: JSON.stringify({
            code: document.getElementById("code").value,
            name: document.getElementById("name").value
        })
    }).then(loadCourses);
}

function editCourse(id, code, name){
    selectedId = id;
    document.getElementById("id").value = id;
    document.getElementById("code").value = code;
    document.getElementById("name").value = name;
}

function updateCourse(){
    if(selectedId === null){
        alert("âš  Select a course first to update!");
        return;
    }
    fetch(`http://localhost:3000/courses/${selectedId}`, {
        method: "PUT",
        headers: {"Content-Type":"application/json"},
        body: JSON.stringify({
            code: document.getElementById("code").value,
            name: document.getElementById("name").value
        })
    }).then(() => {
        selectedId = null;
        document.getElementById("id").value = "";
        document.getElementById("code").value = "";
        document.getElementById("name").value = "";
        loadCourses();
    });
}

function deleteCourse(id){
    fetch(`http://localhost:3000/courses/${id}`, { method: "DELETE" })
    .then(loadCourses);
}
</script>

</body>
</html>
